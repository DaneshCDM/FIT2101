<!DOCTYPE html>
<html lang="english">
  <head>
    <title>exported project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-gray-black);
        background-color: var(--dl-color-gray-white);

      }
    </style>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Patua+One:wght@400&amp;display=swap"
      data-tag="font"
    />
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <div>
      <link href="./dashboard-dark-pop-up-manage-sprint.css" rel="stylesheet" />
      <div class="dashboard-dark-pop-up-manage-sprint-container">
        <div
          class="dashboard-dark-pop-up-manage-sprint-dashboard-dark-popupformanagingsprinttasks"
        >
          <img
            alt="Rectangle234154"
            src="public/external/rectangle234154-0wzsl-200h.png"
            class="dashboard-dark-pop-up-manage-sprint-rectangle23"
          />
          <span class="dashboard-dark-pop-up-manage-sprint-text">
            <span>Manage Sprint</span>
          </span>
        </div> 
        <div class="lanes">
          <h3 class="headings">Product Backlog</h3>
          <div class="swim-lane1" id="backlog-lane">
            <!-- <h3 class="headings">Product Backlog</h3> -->
          </div>
          <h3 class="headings1">Sprint log</h3>
          <div class="swim-lane2" id="sprintlog-lane">
            <!-- <h3 class="headings">Sprint log</h3> -->
          </div>
          <!-- <div class="drag-container1" id="backlog_lane" >
            <div class="board">
              <div class="board-column product-backlog">
                <div class="board-column-container">
                  <div class="board-column-header">Product Backlog</div>
                  <div class="board-column-content-wrapper">
                    <div class="board-column-content" id="product-backlog-board">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="drag-container2" id="sprintlog_lane">
            <div class="board">
              <div class="board-column sprint-log">
                <div class="board-column-container">
                  <div class="board-column-header">Sprint Log</div>
                  <div class="board-column-content-wrapper">
                    <div class="board-column-content">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
        </div>
        <div class="manage-sprint-confirm" id="confirmbtn">
          <button class="confirm-text">Confirm</button>
        </div>
      </div>
    </div>
    <script src=https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
  // import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-analytics.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-database.js";
  
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyCghK_Zy_3Enmz0RJ9pvAxZfWxUYQp-InQ",
    authDomain: "innotechscrum.firebaseapp.com",
    databaseURL: "https://innotechscrum-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "innotechscrum",
    storageBucket: "innotechscrum.appspot.com",
    messagingSenderId: "365889461120",
    appId: "1:365889461120:web:42e3ff55449d78b148bf65",
    measurementId: "G-435J39SW2R"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  // const analytics = getAnalytics(app);
  const database = getDatabase(app);
  const dbRef = ref(database, 'product-backlog-tasks/');

  // // Attach an event listener to listen for changes in the data
  // dataRef.on('value', function(snapshot) {
  //   // Get the data from the snapshot
  //   var data = snapshot.val();

  //   // Update your HTML elements with the data
  //   // Example: 
  //   document.querySelector('.board-item1 span').textContent = data.item1;
  //   document.querySelector('.board-item2 span').textContent = data.item2;
  //   // Repeat this for other elements as needed.
  // });

  // // Function to populate the board items
  // function populateBoard(data) {
  //   // Iterate through the data and populate the board items
  //   for (const key in data) {
  //     if (data.hasOwnProperty(key)) {
  //       const item = data[key];
  //       const boardItem = document.querySelector(`.board-item1`);
  //       if (boardItem) {
  //         // Update the board item's content
  //         const boardItemContent = boardItem.querySelector('.board-item-content span');
  //         boardItemContent.textContent = item.Task_Name;
  //         // You can similarly update other properties of the board item here
  //       }
  //     }
  //   }
  // }
// drag and drop javascript
const draggables = document.querySelectorAll(".task");
const droppables = document.querySelectorAll(".swim-lane1,.swim-lane2");

draggables.forEach((task) => {
  task.addEventListener("dragstart",() => {
    task.classList.add("is-dragging");
  });
  task.addEventListener("dragend",() => {
    task.classList.remove("is-dragging");
  });
});

droppables.forEach((zone) => {
  zone.addEventListener("dragover", (e) =>{
    e.preventDefault();

    const bottomTask = insertAboveTask(zone, e.clientY);
    const curTask = document.querySelector(".is-dragging");
    
    if (!bottomTask){
      zone.appendChild(curTask); 
    } else {
      zone.insertBefore(curTask, bottomTask);
    }
  });
});

const insertAboveTask = (zone, mouseY) => {
  const els = zone.querySelectorAll(".task:not(.is-dragging)")

  let closestTask = null;
  let closestOffset = Number.NEGATIVE_INFINITY;

  els.forEach((task) =>{
    const {top} = task.getBoundingClientRect();

    const offset = mouseY - top;

    if (offset < 0 && offset > closestOffset){
      closestOffset = offset;
      closestTask = task;
    }
  });

  return closestTask;
};

const backlogLane = document.getElementById("backlog-lane")
  function populateBoard(data) {
    backlogLane.innerHTML='';
    for (const key in data) {
      if (data.hasOwnProperty(key)){
        const item = data[key];
        const newTask = document.createElement("p");
        newTask.classList.add("task");
        newTask.setAttribute("draggable","true");
        newTask.innerText=item.Task_Name;

        newTask.addEventListener("dragstart",() => {
          newTask.classList.add("is-dragging");
        });
        newTask.addEventListener("dragend",() => {
          newTask.classList.remove("is-dragging");
        });
        
        backlogLane.appendChild(newTask);
      }
    }
  }

  //function populateBoard(data) {
  //const pbContainer = document.getElementById('product-backlog-board');

  // Clear existing content
  //pbContainer.innerHTML = '';

  // Iterate through the data and populate the board items
  //for (const key in data) {
  //  if (data.hasOwnProperty(key)) {
  //    const item = data[key];
  //    const boardItem = document.createElement('div');
  //    boardItem.className = `board-item`;
  //    boardItem.innerHTML = `<div class="board-item-content" draggable="true"><span>${item.Task_Name}</span></div>`;
  //    pbContainer.appendChild(boardItem);
  // }
  //}
  //}



  // Attach an event listener to listen for changes in the data
  onValue(dbRef, function(snapshot) {
    const data = snapshot.val();
    console.log('Firebase Data:', data);
    // Call the function to populate the board items
    populateBoard(data);
  });
  
</script>
<script>
  let items = document.getElementsByClassName("board-item-content");
  let leftbox = document.getElementById("product-backlog-board")
  let rightbox = document.getElementById("sprint-log-board")

  for(item of items){
    item.addEventListener("dragstart", function(e){
      let selected = e.target

      rightbox.addEventListener("dragover",function(e){
        e.preventDefault();
      });

      rightbox.addEventListener("drop", function(e){
        rightbox.appendChild(selected);
        selected = null;
      })
    })
  }
</script>
    <script src="javaScript.js" defer></script>
    <script>
      confirmbtn.addEventListener('click',(e)=>{
        alert("Confirm button")
      });
    </script>
  </body>
</html>
